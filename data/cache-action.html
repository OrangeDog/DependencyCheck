<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 at 2024-05-15 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20240515" />
    <meta http-equiv="Content-Language" content="en" />
    <title>dependency-check &#x2013; GitHub Action</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
      <script type="text/javascript" src="../js/apache-maven-fluido-1.6.min.js"></script>
<style type="text/css">
                #bannerLeft { margin-top:-20px;margin-bottom:5px !important}
                a.externalLink[href^=https]{padding-right:inherit;background-image:none !important}
                a.externalLink[href^=http]{padding-right:inherit;background-image:none !important}
            </style>
      </head>
    <body class="topBarDisabled">
                      <a href="https://github.com/jeremylong/DependencyCheck">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><img src="../images/dc.svg"  alt="OWASP dependency-check"/></div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li class=""><a href="https://www.owasp.org/" class="externalLink" title="OWASP">OWASP</a><span class="divider">/</span></li>
      <li class=""><a href="https://www.owasp.org/index.php/OWASP_Dependency_Check" class="externalLink" title="Dependency-Check">Dependency-Check</a><span class="divider">/</span></li>
      <li class=""><a href="../" title="documentation">documentation</a><span class="divider">/</span></li>
    <li class="active ">GitHub Action</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2024-05-15</li>
          <li id="projectVersion" class="pull-right">Version: 9.2.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">OWASP dependency-check</li>
    <li><a href="../index.html" title="General"><span class="icon-chevron-right"></span>General</a>  </li>
    <li><a href="../analyzers/index.html" title="File Type Analyzers"><span class="icon-chevron-right"></span>File Type Analyzers</a>  </li>
    <li><a href="../modules.html" title="Modules"><span class="icon-chevron-right"></span>Modules</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
          <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
        <div class="g-plusone" data-href="https://github.com/jeremylong/DependencyCheck.git" data-size="tall" ></div>
                  <div class="clear"></div>
              <div class="clear"></div>
                          <div id="twitter">
        <a href="https://twitter.com/ctxt" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ctxt</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div>
                  <div class="clear"></div>
              <div class="clear"></div>
  <a href="https://www.ej-technologies.com/products/jprofiler/overview.html" title="JProfiler" class="builtBy"><img class="builtBy"  alt="JProfiler Java Profiler" src="https://jeremylong.github.io/DependencyCheck/images/logos/jprofiler.png"   width="170px"  /></a>
<a href="http://www.jetbrains.com/idea/" title="IntelliJ" class="builtBy"><img class="builtBy"  alt="developed using IntelliJ" src="https://jeremylong.github.io/DependencyCheck/images/logos/logo_intellij_idea.png"   width="170px"  /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<section>
<h2><a name="GitHub_Action"></a>GitHub Action</h2>
<p>The following is an example of how one could cache the data directory using GitHub Actions.
Note that this configuration is setup for Maven but could be altered to support gradle or
even the CLI.</p>
<p><b>WARNING</b> this configuration uses a single API key configured in secrets. If multiple actions
use the same API Key you could hit the NVD rate limits.</p>

<div class="source"><pre class="prettyprint linenums"><code class="language-yaml">name: Vulnerability Scan

on:
  pull_request:
  workflow_dispatch:

jobs:
  owasp-scan:
    if: github.actor != 'dependabot[bot]'
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: 17
          distribution: 'adopt'
          server-id: github
          server-username: MAVEN_USERNAME
          server-password: MAVEN_PASSWORD
          cache: 'maven'
          
      - name: Get Date
        id: get-date
        run: |
          echo &quot;datetime=$(/bin/date -u &quot;+%Y%m%d%H&quot;)&quot; &gt;&gt; $GITHUB_OUTPUT
        shell: bash

      - name: Restore cached Maven dependencies
        uses: actions/cache/restore@v3
        with:
          path: ~/.m2/repository
          # Using datetime in cache key as OWASP database may change, without the pom changing
          key: ${{ runner.os }}-maven-${{ steps.get-date.outputs.datetime }}-${{ hashFiles('**/pom.xml') }}
          restore-keys: |
            ${{ runner.os }}-maven-${{ steps.get-date.outputs.datetime }}
            ${{ runner.os }}-maven-
            
      - name: Build &amp; scan
        id: scan
        run: |
          mvn --no-transfer-progress clean package -DskipTests -DnvdApiKey=${{secrets.nvdApiKey}} -DskipITs -Dmax.cvss.score=8 \
            org.owasp:dependency-check-maven:check -l ${{github.workspace}}/mvn-output.txt 
        env:
          MAVEN_USERNAME: ${{ secrets.MAVEN_USERNAME}}
          MAVEN_PASSWORD: ${{ secrets.MAVEN_PASSWORD}}
          
     - name: Cache Maven dependencies
        uses: actions/cache/save@v3
        if: always()
        with:
          path: ~/.m2/repository
          key: ${{ runner.os }}-maven-${{ steps.get-date.outputs.datetime }}-${{ hashFiles('**/pom.xml') }}
</code></pre></div></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2012&#x2013;2024
<a href="https://www.owasp.org">OWASP</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
